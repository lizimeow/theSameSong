<!doctype html>
<html>
  <head>
    <title>同一首歌</title>
    <style>
      .title{
        font-size: 10rem;
        text-align: center;
      }
      .name-input{
        border: 2px solid #000;
        font-size: 8rem;
        width: 100%;
      }
      .submit{
        font-size: 8rem;
        border: 1px solid #000;
        width: 100%;
        margin-top: 2rem;
        text-align: center;
      }
      .play-info{
        font-size: 8rem;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div class="title">努力工作中</div>
    <input type="text" name="" value="" placeholder="歌名" class="name-input">
    <div class="submit" id="submit">go!</div>
    <div class="play-info">当前播放： <span class="song-name"></span></div>
    <audio id="audio" src="" controls loop autoplay></audio>
    <script src="/socket.io/socket.io.js"></script>
<script>

var elm = document.getElementById('submit');
var inputElm = document.getElementsByClassName('name-input')[0];
var songName = document.getElementsByClassName('song-name')[0]
var audioElm = document.getElementById('audio');

var socket = io();
socket.on('change', function(data){
  console.log(data);
  elm.innerText = 'go!'
  songName.innerText = data.name;
  audio.src = 'http://'+data.url;
})



elm.addEventListener('click',function(e){
  var name = inputElm.value;
  socket.emit('submit', name);
  elm.innerText = '爸爸正在爬，别急';

})

</script>
  </body>
</html>
